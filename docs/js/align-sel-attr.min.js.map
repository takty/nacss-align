{"version":3,"sources":["align-sel-attr.js"],"names":["window","NS","initialize","ts","opts","length","addHasOnlyChild","Object","assign","styleHasOnlyChild","stylePrefixNextTo","addNextTo","es","e","hasOnlyChildOne","setClass","parentElement","c","Array","from","childNodes","nodeType","textContent","trim","prev","previousElementSibling","className","tn","tagName","toLowerCase","charAt","toUpperCase","slice","alignSelectorAttribute","tar","cls","enabled","val","key","substr","startsWith","dataset","join","classList","add","remove","resizeListeners","scrollListeners","document","addEventListener","l","passive"],"mappings":"AAUA,aAEAA,OAAM,MAAYA,OAAM,OAAa,GAGrC,SAAWC,GAEV,CAWC,SAASC,EAAWC,EAAIC,EAAO,IACZ,IAAdD,EAAGE,SAOPC,EAAgBH,GALhBC,EAAOG,OAAOC,OAAO,CACpBC,kBAAmB,kBACnBC,kBAAmB,aACjBN,IAEqB,mBACxBO,EAAUR,EAAIC,EAAI,oBAGnB,SAASE,EAAgBM,EAAIH,GAC5B,IAAK,MAAMI,KAAKD,EACXE,EAAgBD,IACnBE,EAASF,EAAEG,cAAeP,GAK7B,SAASK,EAAgBD,GACxB,IAAK,MAAMI,KAAKC,MAAMC,KAAKN,EAAEG,cAAcI,YAC1C,GACiB,IAAfH,EAAEI,UAAmCJ,IAAMJ,GAC5B,IAAfI,EAAEI,UAAyD,KAAzBJ,EAAEK,YAAYC,OAEjD,OAAO,EAGT,OAAO,EAGR,SAASZ,EAAUC,EAAIF,GACtB,IAAK,MAAMG,KAAKD,EAAI,CACnB,MAAMY,EAAOX,EAAEY,uBACf,GAAID,GAA2B,KAAnBA,EAAKE,UAAkB,CAClC,MAAMC,EAAKH,EAAKI,QAAQC,cAExBd,EAASF,EAAGH,GADDiB,EAAGG,OAAO,GAAGC,cAAgBJ,EAAGK,MAAM,OA2InDhC,OAAO,SArILiC,uBAAyB/B,EAsB7B,SAASa,EAASmB,EAAKC,EAAKC,GAAU,EAAMC,EAAM,IACjD,MAAMC,EAAMH,EAAII,OAAO,GACvB,GAAIJ,EAAIK,WAAW,KACdJ,EACHF,EAAIO,QAAQH,GAAOD,SAEZH,EAAIO,QAAQH,OAEd,CACN,MAAMrB,EAAI,CAACqB,EAAKD,GAAKK,KAAK,KACtBN,EACHF,EAAIS,UAAUC,IAAI3B,GAElBiB,EAAIS,UAAUE,OAAO5B,IA6CxB,MAAM6B,EAAkB,GAClBC,EAAkB,GAYxBC,SAASC,iBAAiB,oBAAoB,KAC7CjD,OAAOiD,iBAAiB,UAAU,KACjC,IAAK,MAAMC,KAAKJ,EAAiBI,MAC/B,CAAEC,SAAS,IACdnD,OAAOiD,iBAAiB,UAAU,KACjC,IAAK,MAAMC,KAAKH,EAAiBG,MAC/B,CAAEC,SAAS,OA3JhB","file":"align-sel-attr.min.js","sourcesContent":["/**\n *\n * Align - Selector Attribute\n *\n * @author Takuto Yanagida\n * @version 2021-12-07\n *\n */\n\n\n'use strict';\n\nwindow['NACSS'] = window['NACSS'] || {};\n\n\n(function (NS) {\n\n\t{\n\t\t/**\n\t\t *\n\t\t * Selector Attributes\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2021-11-17\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction initialize(ts, opts = {}) {\n\t\t\tif (ts.length === 0) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleHasOnlyChild: ':ncHasOnlyChild',\n\t\t\t\tstylePrefixNextTo: ':ncNextTo',\n\t\t\t}, opts);\n\t\t\n\t\t\taddHasOnlyChild(ts, opts['styleHasOnlyChild']);\n\t\t\taddNextTo(ts, opts['stylePrefixNextTo']);\n\t\t}\n\t\t\n\t\tfunction addHasOnlyChild(es, styleHasOnlyChild) {\n\t\t\tfor (const e of es) {\n\t\t\t\tif (hasOnlyChildOne(e)) {\n\t\t\t\t\tsetClass(e.parentElement, styleHasOnlyChild);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction hasOnlyChildOne(e) {\n\t\t\tfor (const c of Array.from(e.parentElement.childNodes)) {\n\t\t\t\tif (\n\t\t\t\t\t(c.nodeType === 1 /*ELEMENT_NODE*/ && c !== e) ||\n\t\t\t\t\t(c.nodeType === 3 /*TEXT_NODE*/ && c.textContent.trim() !== '')\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tfunction addNextTo(es, stylePrefixNextTo) {\n\t\t\tfor (const e of es) {\n\t\t\t\tconst prev = e.previousElementSibling;\n\t\t\t\tif (prev && prev.className === '') {\n\t\t\t\t\tconst tn = prev.tagName.toLowerCase();\n\t\t\t\t\tconst cc = tn.charAt(0).toUpperCase() + tn.slice(1);\n\t\t\t\t\tsetClass(e, stylePrefixNextTo + cc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tNS.alignSelectorAttribute = initialize;\n\t}\n\n\t/**\n\t *\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t *\n\t */\n\t\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-12-06\n\t *\n\t */\n\t\n\t\n\tfunction getScrollOffset() {\n\t\tconst s   = getComputedStyle(document.documentElement);\n\t\tconst val = parseInt(s.scrollPaddingTop);\n\t\treturn Number.isNaN(val) ? 0 : val;\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\treturn (...args) => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tisRunning = false;\n\t\t\t\tfn(...args);\n\t\t\t});\n\t\t};\n\t}\n\t\n\tconst resizeListeners = [];\n\tconst scrollListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tfunction onScroll(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tscrollListeners.push(throttle(fn));\n\t}\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tfor (const l of resizeListeners) l();\n\t\t}, { passive: true });\n\t\twindow.addEventListener('scroll', () => {\n\t\t\tfor (const l of scrollListeners) l();\n\t\t}, { passive: true });\n\t});\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction onIntersect(fn, targets, threshold = 0, rootMargin = '* 0px 0px 0px') {\n\t\tconst vs = Array(targets.length).fill(false);\n\t\tconst tm = new Map();\n\t\ttargets.forEach((t, i) => tm.set(t, i));\n\t\n\t\tfunction init() {\n\t\t\tconst io = new IntersectionObserver((es) => {\n\t\t\t\tfor (const e of es) vs[tm.get(e.target)] = e.isIntersecting;\n\t\t\t\tfn(vs);\n\t\t\t}, { rootMargin: rootMargin.replace('*', `${mt}px`), threshold });\n\t\t\tfor (const t of targets) io.observe(t);\n\t\t\treturn io;\n\t\t}\n\t\tlet mt = 0;\n\t\tlet io = null;\n\t\tlet st = null;\n\t\tonResize(() => {\n\t\t\tmt = -getScrollOffset();\n\t\t\tif (st) clearTimeout(st);\n\t\t\tst = setTimeout(() => {\n\t\t\t\tif (io) io.disconnect();\n\t\t\t\tio = init();\n\t\t\t}, 100);\n\t\t}, true);\n\t}\n\t\n\n})(window['NACSS']);\n"]}