{"version":3,"sources":["align.js"],"names":["window","NS","hasClass","tar","cls","key","substr","startsWith","undefined","dataset","classList","contains","setClass","enabled","val","c","join","add","remove","throttle","fn","isRunning","args","requestAnimationFrame","resizeListeners","scrollListeners","onResize","doFirst","push","document","addEventListener","l","passive","apply","tars","opts","Object","assign","left","right","length","styleAlign","classLeft","classRight","classCenter","minWidth","setTimeout","assignEventListener","async","as","aws","map","e","storeWidth","update","doUpdate","count","aw","a","w","getBoundingClientRect","width","Promise","r","cw","contentWidth","parentElement","wn","switchFloatOne","origCls","checkDisplay","innerWidth","s","getComputedStyle","display","ph","parseFloat","paddingLeft","paddingRight","clientWidth","applyFloat","ts","addHasOnlyChild","styleHasOnlyChild","stylePrefixNextTo","addNextTo","es","hasOnlyChildOne","childNodes","nodeType","textContent","trim","prev","previousElementSibling","className","tn","tagName","toLowerCase","charAt","toUpperCase","slice","applySelectorAttribute"],"mappings":"AAUA,aAEAA,OAAc,MAAaA,OAAc,OAAc,CAAC,EACxDA,OAAc,MAAS,MAAIA,OAAc,MAAS,OAAK,CAAC,EAGxD,CAAEC,IAYD,SAASC,EAASC,EAAKC,GACtB,MAAMC,EAAMD,EAAIE,OAAO,GACvB,OAAIF,EAAIG,WAAW,UACUC,IAArBL,EAAIM,QAAQJ,GAEZF,EAAIO,UAAUC,SAASN,EAEhC,CAEA,SAASO,EAAST,EAAKC,EAAKS,GAAU,EAAMC,EAAM,IACjD,MAAMT,EAAMD,EAAIE,OAAO,GACvB,GAAIF,EAAIG,WAAW,KACdM,EACHV,EAAIM,QAAQJ,GAAOS,SAEZX,EAAIM,QAAQJ,OAEd,CACN,MAAMU,EAAI,CAACV,EAAKS,GAAKE,KAAK,KACtBH,EACHV,EAAIO,UAAUO,IAAIF,GAElBZ,EAAIO,UAAUQ,OAAOH,EAEvB,CACD,CA8BA,SAASI,EAASC,GACjB,IAAIC,EACJ,MAAO,IAAIC,KACND,IACJA,GAAY,EACZE,uBAAsB,KACrBF,GAAY,EACZD,KAAME,EAAK,IACV,CAEJ,CAEA,MAAME,EAAkB,GAClBC,EAAkB,GAExB,SAASC,EAASN,EAAIO,GAAU,GAC3BA,GAASP,IACbI,EAAgBI,KAAKT,EAASC,GAC/B,CAOAS,SAASC,iBAAiB,oBAAoB,KAC7C9B,OAAO8B,iBAAiB,UAAU,KACjC,IAAK,MAAMC,KAAKP,EAAiBO,GAAG,GAClC,CAAEC,SAAS,IACdhC,OAAO8B,iBAAiB,UAAU,KACjC,IAAK,MAAMC,KAAKN,EAAiBM,GAAG,GAClC,CAAEC,SAAS,GAAO,IAiCtB,CAWC,SAASC,EAAMC,EAAO,CAAC,EAAGC,EAAO,CAAC,IACjCD,EAAOE,OAAOC,OAAO,CAAEC,KAAM,GAAIC,MAAO,IAAML,IAC/B,KAAEM,OAASN,EAAY,MAAEM,SAAW,IAEnDL,EAAOC,OAAOC,OAAO,CACpBI,WAAa,WACbC,UAAa,YACbC,WAAa,aACbC,YAAa,cACbC,SAAa,KACXV,GAEHW,YAAW,KACVC,EAAoBb,EAAW,KAAGC,EAAgB,UAAGA,GACrDY,EAAoBb,EAAY,MAAGC,EAAiB,WAAGA,EAAK,GAC1D,GACJ,CAEAa,eAAeD,EAAoBE,EAAI7C,EAAK+B,GAC3C,MAAMe,EAAMD,EAAGE,KAAIC,GAAK,CAACA,EAAG,KAC5BC,EAAWH,EAAK9C,EAAK+B,GACrBT,GAAS,IAAM4B,EAAOJ,EAAK9C,EAAK+B,KAAO,EACxC,CAMAa,eAAeK,EAAWH,EAAK9C,EAAK+B,GACnC,OAAa,CACZ,IAAIoB,GAAW,EACXC,EAAW,EACf,IAAK,MAAMC,KAAMP,EAAK,CACrB,MAAOQ,EAAGC,GAAKF,EACX,GAAKE,EACRH,GAAS,GAGVC,EAAG,GAAKC,EAAEE,wBAAwBC,MAClCN,GAAW,EACZ,CAIA,GAHIA,GACHD,EAAOJ,EAAK9C,EAAK+B,GAEdqB,IAAUN,EAAIV,OACjB,YAEK,IAAIsB,SAAQC,GAAKjB,WAAWiB,EAAG,MACtC,CACD,CAEA,SAAST,EAAOJ,EAAK9C,EAAK+B,GACzB,IAAK,MAAMsB,KAAMP,EAAK,CACrB,MAAOQ,EAAGC,GAAKF,EACTO,EAAKC,EAAaP,EAAEQ,eACpBC,EAAKT,EAAEE,wBAAwBC,MACjCM,EAAU,GAALH,GAAYL,EAAIQ,IACxBV,EAAG,GAAKU,EAEV,CACA,IAAK,MAAOT,EAAGC,KAAMT,EAAK,CAEzBkB,EAAeV,EADJO,EAAaP,EAAEQ,eAAe,GAClBP,EAAIxB,EAAKU,SAAUzC,EAAK+B,EAChD,CACD,CAEA,SAASiC,EAAeV,EAAG7C,EAASwD,EAASlC,GACxCtB,IAAYX,EAASwD,EAAGvB,EAAKM,cAChC7B,EAAS8C,EAAGvB,EAAKM,YAAY,EAAM4B,GACnCX,EAAEhD,UAAUQ,OAAOmD,GACnBX,EAAEhD,UAAUO,IAAIkB,EAAKS,eAEjB/B,GAAWX,EAASwD,EAAGvB,EAAKM,cAChCiB,EAAEhD,UAAUQ,OAAOiB,EAAKS,aACxBc,EAAEhD,UAAUO,IAAIoD,GAChBzD,EAAS8C,EAAGvB,EAAKM,YAAY,GAE/B,CAEA,SAASwB,EAAab,EAAGkB,GAAe,GACvC,GAAU,OAANlB,EACH,OAAOpD,OAAOuE,WAEf,MAAMC,EAAIC,iBAAiBrB,GAC3B,GAAIkB,GAA8B,WAAdE,EAAEE,QACrB,OAAOT,EAAab,EAAEc,eAEvB,MAAMS,EAAKC,WAAWJ,EAAEK,aAAeD,WAAWJ,EAAEM,cACpD,OAAO1B,EAAE2B,YAAcJ,CACxB,CAEA1E,EAAG+E,WAAa/C,CACjB,CACA,CAWC,SAASA,EAAMgD,EAAI9C,EAAO,CAAC,GACR,IAAd8C,EAAGzC,SAOP0C,EAAgBD,GALhB9C,EAAOC,OAAOC,OAAO,CACpB8C,kBAAmB,kBACnBC,kBAAmB,aACjBjD,IAEyC,mBAC5CkD,EAAUJ,EAAI9C,EAAwB,mBACvC,CAEA,SAAS+C,EAAgBI,EAAIH,GAC5B,IAAK,MAAM/B,KAAKkC,EACXC,EAAgBnC,IACnBxC,EAASwC,EAAEc,cAAeiB,EAG7B,CAEA,SAASI,EAAgBnC,GACxB,IAAK,MAAMrC,IAAK,IAAIqC,EAAEc,cAAcsB,YACnC,GACiB,IAAfzE,EAAE0E,UAAmC1E,IAAMqC,GAC5B,IAAfrC,EAAE0E,UAAyD,KAAzB1E,EAAE2E,YAAYC,OAEjD,OAAO,EAGT,OAAO,CACR,CAEA,SAASN,EAAUC,EAAIF,GACtB,IAAK,MAAMhC,KAAKkC,EAAI,CACnB,MAAMM,EAAOxC,EAAEyC,uBACf,GAAID,GAA2B,KAAnBA,EAAKE,UAAkB,CAClC,MAAMC,EAAKH,EAAKI,QAAQC,cAExBrF,EAASwC,EAAGgC,GADDW,EAAGG,OAAO,GAAGC,cAAgBJ,EAAGK,MAAM,IAElD,CACD,CACD,CAEAnG,EAAGoG,uBAAyBpE,CAC7B,CAEA,EApSD,CAoSGjC,OAAc,MAAS","file":"align.min.js","sourcesContent":["/**\n *\n * Align\n *\n * @author Takuto Yanagida\n * @version 2021-12-26\n *\n */\n\n\n'use strict';\n\nwindow['NACSS']          = window['NACSS']          || {};\nwindow['NACSS']['align'] = window['NACSS']['align'] || {};\n\n\n((NS) => {\n\n\t/**\n\t *\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t *\n\t */\n\t\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-12-06\n\t *\n\t */\n\t\n\t\n\tfunction getScrollOffset() {\n\t\tconst s   = getComputedStyle(document.documentElement);\n\t\tconst val = parseInt(s.scrollPaddingTop);\n\t\treturn Number.isNaN(val) ? 0 : val;\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\treturn (...args) => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tisRunning = false;\n\t\t\t\tfn(...args);\n\t\t\t});\n\t\t};\n\t}\n\t\n\tconst resizeListeners = [];\n\tconst scrollListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tfunction onScroll(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tscrollListeners.push(throttle(fn));\n\t}\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tfor (const l of resizeListeners) l();\n\t\t}, { passive: true });\n\t\twindow.addEventListener('scroll', () => {\n\t\t\tfor (const l of scrollListeners) l();\n\t\t}, { passive: true });\n\t});\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction onIntersect(fn, targets, threshold = 0, rootMargin = '* 0px 0px 0px') {\n\t\tconst vs = Array(targets.length).fill(false);\n\t\tconst tm = new Map();\n\t\ttargets.forEach((t, i) => tm.set(t, i));\n\t\n\t\tfunction init() {\n\t\t\tconst io = new IntersectionObserver((es) => {\n\t\t\t\tfor (const e of es) vs[tm.get(e.target)] = e.isIntersecting;\n\t\t\t\tfn(vs);\n\t\t\t}, { rootMargin: rootMargin.replace('*', `${mt}px`), threshold });\n\t\t\tfor (const t of targets) io.observe(t);\n\t\t\treturn io;\n\t\t}\n\t\tlet mt = 0;\n\t\tlet io = null;\n\t\tlet st = null;\n\t\tonResize(() => {\n\t\t\tmt = -getScrollOffset();\n\t\t\tif (st) clearTimeout(st);\n\t\t\tst = setTimeout(() => {\n\t\t\t\tif (io) io.disconnect();\n\t\t\t\tio = init();\n\t\t\t}, 100);\n\t\t}, true);\n\t}\n\t\n\t{\n\t\t/**\n\t\t *\n\t\t * Float\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2024-06-04\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction apply(tars = {}, opts = {}) {\n\t\t\ttars = Object.assign({ left: [], right: [] }, tars);\n\t\t\tif (tars['left'].length + tars['right'].length === 0 ) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleAlign : ':ncAlign',\n\t\t\t\tclassLeft  : 'alignleft',\n\t\t\t\tclassRight : 'alignright',\n\t\t\t\tclassCenter: 'aligncenter',\n\t\t\t\tminWidth   : 240,  // px\n\t\t\t}, opts);\n\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tassignEventListener(tars['left'], opts['classLeft'], opts);\n\t\t\t\tassignEventListener(tars['right'], opts['classRight'], opts);\n\t\t\t}, 0);  // Delay\n\t\t}\n\t\t\n\t\tasync function assignEventListener(as, cls, opts) {\n\t\t\tconst aws = as.map(e => [e, 0]);\n\t\t\tstoreWidth(aws, cls, opts);\n\t\t\tonResize(() => update(aws, cls, opts), true);\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tasync function storeWidth(aws, cls, opts) {\n\t\t\twhile (true) {\n\t\t\t\tlet doUpdate = false;\n\t\t\t\tlet count    = 0;\n\t\t\t\tfor (const aw of aws) {\n\t\t\t\t\tconst [a, w] = aw;\n\t\t\t\t\tif (10 < w) {\n\t\t\t\t\t\tcount += 1;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\taw[1] = a.getBoundingClientRect().width;\n\t\t\t\t\tdoUpdate = true;\n\t\t\t\t}\n\t\t\t\tif (doUpdate) {\n\t\t\t\t\tupdate(aws, cls, opts)\n\t\t\t\t}\n\t\t\t\tif (count === aws.length) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tawait new Promise(r => setTimeout(r, 100));\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction update(aws, cls, opts) {\n\t\t\tfor (const aw of aws) {\n\t\t\t\tconst [a, w] = aw;\n\t\t\t\tconst cw = contentWidth(a.parentElement);\n\t\t\t\tconst wn = a.getBoundingClientRect().width;\n\t\t\t\tif (wn < cw * 0.9 && w < wn) {\n\t\t\t\t\taw[1] = wn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [a, w] of aws) {\n\t\t\t\tconst cw = contentWidth(a.parentElement, true);\n\t\t\t\tswitchFloatOne(a, cw - w < opts.minWidth, cls, opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction switchFloatOne(a, enabled, origCls, opts) {\n\t\t\tif (enabled && !hasClass(a, opts.styleAlign)) {\n\t\t\t\tsetClass(a, opts.styleAlign, true, origCls);\n\t\t\t\ta.classList.remove(origCls);\n\t\t\t\ta.classList.add(opts.classCenter);\n\t\t\t}\n\t\t\tif (!enabled && hasClass(a, opts.styleAlign)) {\n\t\t\t\ta.classList.remove(opts.classCenter);\n\t\t\t\ta.classList.add(origCls);\n\t\t\t\tsetClass(a, opts.styleAlign, false);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction contentWidth(e, checkDisplay = false) {\n\t\t\tif (e === null) {\n\t\t\t\treturn window.innerWidth;\n\t\t\t}\n\t\t\tconst s = getComputedStyle(e);\n\t\t\tif (checkDisplay && s.display === 'inline') {\n\t\t\t\treturn contentWidth(e.parentElement);\n\t\t\t}\n\t\t\tconst ph = parseFloat(s.paddingLeft) + parseFloat(s.paddingRight);\n\t\t\treturn e.clientWidth - ph;\n\t\t}\n\t\t\n\t\tNS.applyFloat = apply;\n\t}\n\t{\n\t\t/**\n\t\t *\n\t\t * Selector Attributes\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2022-01-07\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction apply(ts, opts = {}) {\n\t\t\tif (ts.length === 0) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleHasOnlyChild: ':ncHasOnlyChild',\n\t\t\t\tstylePrefixNextTo: ':ncNextTo',\n\t\t\t}, opts);\n\t\t\n\t\t\taddHasOnlyChild(ts, opts['styleHasOnlyChild']);\n\t\t\taddNextTo(ts, opts['stylePrefixNextTo']);\n\t\t}\n\t\t\n\t\tfunction addHasOnlyChild(es, styleHasOnlyChild) {\n\t\t\tfor (const e of es) {\n\t\t\t\tif (hasOnlyChildOne(e)) {\n\t\t\t\t\tsetClass(e.parentElement, styleHasOnlyChild);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction hasOnlyChildOne(e) {\n\t\t\tfor (const c of [...e.parentElement.childNodes]) {\n\t\t\t\tif (\n\t\t\t\t\t(c.nodeType === 1 /*ELEMENT_NODE*/ && c !== e) ||\n\t\t\t\t\t(c.nodeType === 3 /*TEXT_NODE*/ && c.textContent.trim() !== '')\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tfunction addNextTo(es, stylePrefixNextTo) {\n\t\t\tfor (const e of es) {\n\t\t\t\tconst prev = e.previousElementSibling;\n\t\t\t\tif (prev && prev.className === '') {\n\t\t\t\t\tconst tn = prev.tagName.toLowerCase();\n\t\t\t\t\tconst cc = tn.charAt(0).toUpperCase() + tn.slice(1);\n\t\t\t\t\tsetClass(e, stylePrefixNextTo + cc);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tNS.applySelectorAttribute = apply;\n\t}\n\n})(window['NACSS']['align']);\n"]}