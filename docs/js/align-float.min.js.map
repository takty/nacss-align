{"version":3,"sources":["align-float.js"],"names":["window","NS","initialize","tars","opts","Object","assign","left","right","length","styleAlign","classLeft","classRight","classCenter","minWidth","setTimeout","assignEventListener","as","cls","aws","map","e","fn","doFirst","scrollListeners","push","throttle","onScroll","storeWidth","onResize","update","style","aw","a","w","switchFloatOne","getBoundingClientRect","width","cw","contentWidth","parentElement","wn","enabled","origCls","hasClass","setClass","classList","remove","add","checkDisplay","innerWidth","s","getComputedStyle","display","ph","parseFloat","paddingLeft","paddingRight","clientWidth","alignFloat","tar","key","substr","startsWith","undefined","dataset","contains","val","c","join","isRunning","args","requestAnimationFrame","resizeListeners","document","addEventListener","l","passive"],"mappings":"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","file":"align-float.min.js","sourcesContent":["/**\n *\n * Align - Float\n *\n * @author Takuto Yanagida\n * @version 2021-12-07\n *\n */\n\n\n'use strict';\n\nwindow['NACSS'] = window['NACSS'] || {};\n\n\n(function (NS) {\n\n\t{\n\t\t/**\n\t\t *\n\t\t * Float\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2021-11-17\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction initialize(tars = {}, opts = {}) {\n\t\t\ttars = Object.assign({ left: [], right: [] }, tars);\n\t\t\tif (tars['left'].length + tars['right'].length === 0 ) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleAlign : ':ncAlign',\n\t\t\t\tclassLeft  : 'alignleft',\n\t\t\t\tclassRight : 'alignright',\n\t\t\t\tclassCenter: 'aligncenter',\n\t\t\t\tminWidth   : 240,  // px\n\t\t\t}, opts);\n\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tassignEventListener(tars['left'], opts['classLeft'], opts);\n\t\t\t\tassignEventListener(tars['right'], opts['classRight'], opts);\n\t\t\t}, 0);  // Delay\n\t\t}\n\t\t\n\t\tfunction assignEventListener(as, cls, opts) {\n\t\t\tconst aws = as.map(e => [e, 0]);\n\t\t\tonScroll(() => storeWidth(aws, cls, opts), true);  // For lazy loading\n\t\t\tonResize(() => update(aws, cls, opts), true);\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction storeWidth(aws, style, opts) {\n\t\t\tfor (const aw of aws) {\n\t\t\t\tconst [a, w] = aw;\n\t\t\t\tif (10 < w) continue;\n\t\t\t\tswitchFloatOne(a, false, style, opts);\n\t\t\t\taw[1] = a.getBoundingClientRect().width;\n\t\t\t\tswitchFloatOne(a, true, style, opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction update(aws, cls, opts) {\n\t\t\tfor (const aw of aws) {\n\t\t\t\tconst [a, w] = aw;\n\t\t\t\tconst cw = contentWidth(a.parentElement);\n\t\t\t\tconst wn = a.getBoundingClientRect().width;\n\t\t\t\tif (wn < cw * 0.9 && w < wn) {\n\t\t\t\t\taw[1] = wn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [a, w] of aws) {\n\t\t\t\tconst cw = contentWidth(a.parentElement, true);\n\t\t\t\tswitchFloatOne(a, cw - w < opts.minWidth, cls, opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction switchFloatOne(a, enabled, origCls, opts) {\n\t\t\tif (enabled && !hasClass(a, opts.styleAlign)) {\n\t\t\t\tsetClass(a, opts.styleAlign, true, origCls);\n\t\t\t\ta.classList.remove(origCls);\n\t\t\t\ta.classList.add(opts.classCenter);\n\t\t\t}\n\t\t\tif (!enabled && hasClass(a, opts.styleAlign)) {\n\t\t\t\ta.classList.remove(opts.classCenter);\n\t\t\t\ta.classList.add(origCls);\n\t\t\t\tsetClass(a, opts.styleAlign, false);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction contentWidth(e, checkDisplay = false) {\n\t\t\tif (e === null) {\n\t\t\t\treturn window.innerWidth;\n\t\t\t}\n\t\t\tconst s = getComputedStyle(e);\n\t\t\tif (checkDisplay && s.display === 'inline') {\n\t\t\t\treturn contentWidth(e.parentElement);\n\t\t\t}\n\t\t\tconst ph = parseFloat(s.paddingLeft) + parseFloat(s.paddingRight);\n\t\t\treturn e.clientWidth - ph;\n\t\t}\n\t\t\n\t\tNS.alignFloat = initialize;\n\t}\n\n\t/**\n\t *\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t *\n\t */\n\t\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-12-06\n\t *\n\t */\n\t\n\t\n\tfunction getScrollOffset() {\n\t\tconst s   = getComputedStyle(document.documentElement);\n\t\tconst val = parseInt(s.scrollPaddingTop);\n\t\treturn Number.isNaN(val) ? 0 : val;\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\treturn (...args) => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tisRunning = false;\n\t\t\t\tfn(...args);\n\t\t\t});\n\t\t};\n\t}\n\t\n\tconst resizeListeners = [];\n\tconst scrollListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tfunction onScroll(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tscrollListeners.push(throttle(fn));\n\t}\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tfor (const l of resizeListeners) l();\n\t\t}, { passive: true });\n\t\twindow.addEventListener('scroll', () => {\n\t\t\tfor (const l of scrollListeners) l();\n\t\t}, { passive: true });\n\t});\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction onIntersect(fn, targets, threshold = 0, rootMargin = '* 0px 0px 0px') {\n\t\tconst vs = Array(targets.length).fill(false);\n\t\tconst tm = new Map();\n\t\ttargets.forEach((t, i) => tm.set(t, i));\n\t\n\t\tfunction init() {\n\t\t\tconst io = new IntersectionObserver((es) => {\n\t\t\t\tfor (const e of es) vs[tm.get(e.target)] = e.isIntersecting;\n\t\t\t\tfn(vs);\n\t\t\t}, { rootMargin: rootMargin.replace('*', `${mt}px`), threshold });\n\t\t\tfor (const t of targets) io.observe(t);\n\t\t\treturn io;\n\t\t}\n\t\tlet mt = 0;\n\t\tlet io = null;\n\t\tlet st = null;\n\t\tonResize(() => {\n\t\t\tmt = -getScrollOffset();\n\t\t\tif (st) clearTimeout(st);\n\t\t\tst = setTimeout(() => {\n\t\t\t\tif (io) io.disconnect();\n\t\t\t\tio = init();\n\t\t\t}, 100);\n\t\t}, true);\n\t}\n\t\n\n})(window['NACSS']);\n"]}